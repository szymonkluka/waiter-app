{"ast":null,"code":"import shortid from 'shortid';\nimport { POSTS_URL } from '../config';\nexport const getAllPosts = _ref => {\n  let {\n    posts\n  } = _ref;\n  return posts;\n};\nexport const getPostById = (_ref2, id) => {\n  let {\n    posts\n  } = _ref2;\n  return posts.find(post => post.id === id);\n};\nexport const getPostsByCategory = (_ref3, category) => {\n  let {\n    posts\n  } = _ref3;\n  return posts.filter(post => post.category === category);\n};\nexport const deletePost = payload => ({\n  type: DELETE_POST,\n  payload\n});\nexport const addPost = payload => ({\n  type: ADD_POST,\n  payload\n});\nexport const editPost = payload => ({\n  type: EDIT_POST,\n  payload\n});\nexport const getData = payload => ({\n  type: GET_DATA,\n  payload\n});\nexport const editedData = payload => ({\n  type: EDIT_DATA,\n  payload\n});\nexport const changeStatus = payload => ({\n  type: CHANGE_STATUS,\n  payload\n});\nexport const getStatus = _ref4 => {\n  let {\n    tableRequestPending\n  } = _ref4;\n  return tableRequestPending;\n};\nconst createActionName = actionName => `app/posts/${actionName}`;\nconst DELETE_POST = createActionName('DELETE_POST');\nconst ADD_POST = createActionName('ADD_POST');\nconst EDIT_POST = createActionName('EDIT_POST');\nconst GET_DATA = createActionName('GET_DATA');\nexport const fetchData = () => {\n  return dispatch => {\n    dispatch(changeStatus);\n    fetch(`${'http://localhost:3131'}/posts`).then(response => response.json()).then(data => dispatch(getData(data))).then(() => dispatch(changeStatus));\n  };\n};\nexport const postsReducer = function () {\n  let statePart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case EDIT_DATA:\n      return statePart.map(post => post.id === action.payload.id ? {\n        ...post,\n        ...action.payload\n      } : post);\n    case DELETE_POST:\n      return statePart.filter(post => post.id !== action.payload);\n    case ADD_POST:\n      return [...statePart, {\n        ...action.payload,\n        id: shortid()\n      }];\n    case EDIT_POST:\n      return statePart.map(post => post.id === action.payload.id ? {\n        ...post,\n        ...action.payload\n      } : post);\n    case GET_DATA:\n      return [...action.payload];\n    case CHANGE_STATUS:\n      {\n        return action.payload;\n      }\n    default:\n      return statePart;\n  }\n};\nconst createActionNames = action => {\n  return `app/status/${action}`;\n};\nconst CHANGE_STATUS = createActionNames('CHANGE_STATUS');\nconst EDIT_DATA = createActionNames('EDIT_DATA');\nexport const addChangedData = changeData => {\n  return dispatch => {\n    const options = {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(changeData)\n    };\n    fetch(`${POSTS_URL}/posts/${changeData.id}`, options).then(response => response.json()).then(data => dispatch(editedData(data)));\n  };\n};\nexport const statusReducer = function () {\n  let statePart = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case CHANGE_STATUS:\n      {\n        return action.payload;\n      }\n    default:\n      return statePart;\n  }\n};\n\n// reducer","map":{"version":3,"names":["shortid","POSTS_URL","getAllPosts","_ref","posts","getPostById","_ref2","id","find","post","getPostsByCategory","_ref3","category","filter","deletePost","payload","type","DELETE_POST","addPost","ADD_POST","editPost","EDIT_POST","getData","GET_DATA","editedData","EDIT_DATA","changeStatus","CHANGE_STATUS","getStatus","_ref4","tableRequestPending","createActionName","actionName","fetchData","dispatch","fetch","then","response","json","data","postsReducer","statePart","arguments","length","undefined","action","map","createActionNames","addChangedData","changeData","options","method","headers","body","JSON","stringify","statusReducer"],"sources":["C:/Users/lenov/Desktop/waiter-app/src/redux/postsRedux.js"],"sourcesContent":["import shortid from 'shortid';\r\nimport { POSTS_URL } from '../config';\r\n\r\nexport const getAllPosts = ({ posts }) => posts;\r\nexport const getPostById = ({ posts }, id) => posts.find(post => post.id === id);\r\nexport const getPostsByCategory = ({ posts }, category) => posts.filter(post => post.category === category);\r\n\r\nexport const deletePost = payload => ({ type: DELETE_POST, payload })\r\nexport const addPost = payload => ({ type: ADD_POST, payload });\r\nexport const editPost = payload => ({ type: EDIT_POST, payload });\r\nexport const getData = (payload) => ({ type: GET_DATA, payload });\r\nexport const editedData = (payload) => ({ type: EDIT_DATA, payload })\r\nexport const changeStatus = (payload) => ({ type: CHANGE_STATUS, payload });\r\nexport const getStatus = ({ tableRequestPending }) => tableRequestPending;\r\n\r\n\r\nconst createActionName = actionName => `app/posts/${actionName}`;\r\nconst DELETE_POST = createActionName('DELETE_POST')\r\nconst ADD_POST = createActionName('ADD_POST');\r\nconst EDIT_POST = createActionName('EDIT_POST');\r\nconst GET_DATA = createActionName('GET_DATA');\r\n\r\nexport const fetchData = () => {\r\n  return (dispatch) => {\r\n    dispatch(changeStatus);\r\n    fetch(`${'http://localhost:3131'}/posts`)\r\n      .then((response) => response.json())\r\n      .then((data) => dispatch(getData(data)))\r\n      .then(() => dispatch(changeStatus));\r\n  };\r\n};\r\n\r\nexport const postsReducer = (statePart = [], action) => {\r\n  switch (action.type) {\r\n    case EDIT_DATA:\r\n      return statePart.map(post => (post.id === action.payload.id) ? { ...post, ...action.payload } : post);\r\n    case DELETE_POST:\r\n      return statePart.filter(post => post.id !== action.payload)\r\n    case ADD_POST:\r\n      return [...statePart, { ...action.payload, id: shortid() }];\r\n    case EDIT_POST:\r\n      return statePart.map(post => (post.id === action.payload.id) ? { ...post, ...action.payload } : post);\r\n    case GET_DATA:\r\n      return [...action.payload];\r\n    case CHANGE_STATUS: {\r\n      return action.payload;\r\n    }\r\n    default:\r\n      return statePart;\r\n  }\r\n};\r\n\r\nconst createActionNames = (action) => {\r\n  return `app/status/${action}`;\r\n};\r\n\r\nconst CHANGE_STATUS = createActionNames('CHANGE_STATUS');\r\nconst EDIT_DATA = createActionNames('EDIT_DATA');\r\n\r\nexport const addChangedData = (changeData) => {\r\n  return (dispatch) => {\r\n    const options = {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(changeData),\r\n    };\r\n\r\n    fetch(`${POSTS_URL}/posts/${changeData.id}`, options)\r\n      .then((response) => response.json())\r\n      .then((data) => dispatch(editedData(data)));\r\n  };\r\n};\r\n\r\n\r\nexport const statusReducer = (statePart = [], action) => {\r\n  switch (action.type) {\r\n    case CHANGE_STATUS: {\r\n      return action.payload;\r\n    }\r\n    default:\r\n      return statePart;\r\n  }\r\n};\r\n\r\n\r\n// reducer\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}